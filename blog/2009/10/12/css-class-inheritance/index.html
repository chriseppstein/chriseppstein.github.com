<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>CSS Class Inheritance: Abstracting Selectors</title>
    <meta content="A discussion of how the concept of CSS Class Inheritance would work and how it differs from mixins." name="description" />
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/posts/class_inheritance.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
      //<![CDATA[
        google.load("jquery", "1.3.2");
      //]]>
    </script>
    <script src="/javascripts/jquery.tweet.js" type="text/javascript"></script>
    <script src="/javascripts/site.js" type="text/javascript"></script>
  </head>
  <body id="post">
    <div id="header-wrapper">
      <div id="header">
        <div class="aside">
          <div id="search">
            <form action="http://www.google.com/cse" id="cse-search-box">
              <input name="cx" type="hidden" value="010456759155788273473:m_ld19wftd4" />
              <input name="ie" type="hidden" value="UTF-8" />
              <input id="q" name="q" type="text" />
              <!-- %input(type="submit" name="sa" value="Search") -->
            </form>
          </div>
          <div id="blog-links">
            <a href="/blog/atom.xml" id="rss" title="subscribe">
              <img src="/images/rss.png" />
              <span>Subscribe</span>
            </a>
            <a href="/blog/archives.html" id="archive" title="blog archive">Blog Archive</a>
          </div>
        </div>
        <div class="nav">
          <ul>
            <li class="home">
              <a href="/" title="Home">Home</a>
            </li>
            <li class="blog">
              <a href="/blog/" title="Blog">Blog</a>
            </li>
            <li class="projects">
              <a href="/projects/" title="Projects">Projects</a>
            </li>
            <li class="work">
              <a href="/work/" title="Work">Work</a>
            </li>
          </ul>
        </div>
        <div class="title highlight">
          <h1 class="n">#chris-eppstein</h1>
          <h2>&nbsp;&nbsp;<span class="k">position</span><span class="o">:</span> <span class="m">unique</span></h2>
        </div>
      </div>
    </div>
    <div id="content-wrapper">
      <div id="content">
        <div class="blog" id="page">
          <div class="contents section alpha">
            <div id="tweet-this">
              <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="chriseppstein" data-url="http://chriseppstein.github.com/blog/2009/10/12/css-class-inheritance/" data-text="CSS Class Inheritance: Abstracting Selectors">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
            </div>
            <div class="metadata">
              Published:
              <span class="pubdate">12 Oct, 2009</span>
            </div>
            <h2 class="header">
              CSS Class Inheritance: Abstracting Selectors
            </h2>
            <div class="article"><p><a href="http://wiki.github.com/stubbornella/oocss">OOCSS</a> (Object Oriented CSS) is a CSS Framework by <a href="http://www.stubbornella.org/content/">Nicole Sullivan</a>.&#x000A;It is unique among the landscape of CSS frameworks &#8211; it consists of some basic CSS to get you started and best practices to help you build out webpages by adhering to a very strict separation of concerns at both the html content and CSS style levels. Like other CSS Frameworks, OOCSS expects you to build your content on top of your stylesheets instead of the other way around and it is well suited for sites that churn out lots of custom html pages that need to adhere to a common look and feel. The object oriented aspect of the framework is built on the concept of CSS Class Inheritance &#8211; a very powerful and natural concept. <a href="http://lesscss.org">LessCSS</a> also attempts to provide this feature via precompilation. <strong>Unfortunately, it doesn&#8217;t really exist yet</strong> in either case. In this post, I&#8217;ll examine how css class inheritance would work, some possible syntaxes for it, and compare it to a very similar concept: the mixin. I&#8217;ll also describe the current limitations of OOCSS and LessCSS approaches and give my educated guess on what the future holds for this concept.</p>&#x000A;&#x000A;<h2>What is CSS Class Inheritance?</h2>&#x000A;&#x000A;<p>When a CSS selector inherits a CSS class it is as if that class is applied to all elements within the document that match the selector.</p>&#x000A;&#x000A;<h2>How is CSS Class Inheritance Specified?</h2>&#x000A;&#x000A;<p>Nicole has proposed a new property for CSS called &#8220;extends&#8221;. Let&#8217;s look at a simple example:</p>&#x000A;&#x000A;<div class="code-wrapper">&#x000A;<table id="simple-class-inheritance" class="comparison side-by-side">&#x000A;<tr>&#x000A;<th class="window-title">CSS</th>&#x000A;<th class="gap"> </th>&#x000A;<th class="window-title">Display</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="CodeRay css">&#x000A;  <div class="code"><pre><span class="cl">.box</span> {&#x000A;  <span class="ke">border</span>: <span class="fl">2px</span> <span class="vl">solid</span> <span class="vl">black</span>;&#x000A;  <span class="ke">margin</span>: <span class="fl">1em</span>;&#x000A;}&#x000A;&#x000A;<span class="cl">.important-box</span> {&#x000A;  <span class="ke">extends</span>: <span class="vl">box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#CCC</span>;&#x000A;}&#x000A;&#x000A;<span class="cl">.error-box</span> {&#x000A;  <span class="ke">extends</span>: <span class="vl">important-box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#FCC</span>;&#x000A;  <span class="ke">color</span>: <span class="vl">red</span>;&#x000A;  <span class="ke">border-color</span>: <span class="vl">red</span>;&#x000A;}</pre></div>&#x000A;</div></pre>&#x000A;</div>&#x000A;</td>&#x000A;<td rowspan="4" class="gap"> </td>&#x000A;<td rowspan="4" valign="top" class="window browser">&#x000A;<div id="simple-display">&#x000A;<div class="box">&#x000A;  This is a normal box.&#x000A;</div>&#x000A;<div class="important-box">&#x000A;  This is an important box.&#x000A;</div>&#x000A;<div class="error-box">&#x000A;  This is an error box.&#x000A;</div>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;<tr><td> </td></tr>&#x000A;<tr>&#x000A;<th class="window-title">HTML</th>&#x000A;</tr>&#x000A;<tr><td valign="top" class="window editor">&#x000A;<pre><div class="highlight html"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span><span class="nt">&gt;</span>&#x000A;  This is a normal box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"important-box"</span><span class="nt">&gt;</span>&#x000A;  This is an important box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"error-box"</span><span class="nt">&gt;</span>&#x000A;  This is an error box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;</pre></div></pre>&#x000A;</td></tr>&#x000A;</table>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>In LessCSS the syntax is different, you simply place the class selector you wish to inherit within the definition of a selector. Example:</p>&#x000A;&#x000A;<div class="code-wrapper">&#x000A;<table id="simple-class-inheritance" class="comparison side-by-side">&#x000A;<tr>&#x000A;<th class="window-title">CSS</th>&#x000A;<th class="gap"> </th>&#x000A;<th class="window-title">Display</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="CodeRay css">&#x000A;  <div class="code"><pre><span class="cl">.box</span> {&#x000A;  <span class="ke">border</span>: <span class="fl">2px</span> <span class="vl">solid</span> <span class="vl">black</span>;&#x000A;  <span class="ke">margin</span>: <span class="fl">1em</span>;&#x000A;}&#x000A;&#x000A;<span class="cl">.important-box</span> {&#x000A;  .<span class="ke">box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#CCC</span>;&#x000A;}&#x000A;&#x000A;<span class="cl">.error-box</span> {&#x000A;  .<span class="ke">important-box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#FCC</span>;&#x000A;  <span class="ke">color</span>: <span class="vl">red</span>;&#x000A;  <span class="ke">border-color</span>: <span class="vl">red</span>;&#x000A;}</pre></div>&#x000A;</div></pre>&#x000A;</div>&#x000A;</td>&#x000A;<td rowspan="4" class="gap"> </td>&#x000A;<td rowspan="4" valign="top" class="window browser">&#x000A;<div id="simple-display">&#x000A;<div class="box">&#x000A;  This is a normal box.&#x000A;</div>&#x000A;<div class="important-box">&#x000A;  This is an important box.&#x000A;</div>&#x000A;<div class="error-box">&#x000A;  This is an error box.&#x000A;</div>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;<tr><td> </td></tr>&#x000A;<tr>&#x000A;<th class="window-title">HTML</th>&#x000A;</tr>&#x000A;<tr><td valign="top" class="window editor">&#x000A;<pre><div class="highlight html"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span><span class="nt">&gt;</span>&#x000A;  This is a normal box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"important-box"</span><span class="nt">&gt;</span>&#x000A;  This is an important box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"error-box"</span><span class="nt">&gt;</span>&#x000A;  This is an error box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;</pre></div></pre>&#x000A;</td></tr>&#x000A;</table>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>Both of these approaches are interesting, but I find them both lacking:</p>&#x000A;&#x000A;<ul>&#x000A;<li>The behavior of the <code>extends</code> property would be counter-intuitive. The natural behavior of &#8220;extend&#8221; or &#8220;inherit&#8221; is to accumulate, but there is no other style property that has that behavior. This would pose challenges for implementors and users alike who may assume that specifying <code>extends</code> overrides previous values. On the flip side, if the decision was made to have the <code>extends</code> property override previous values in the selector heirarchy, then we lose the concept of &#8220;encapsulation&#8221; which is core to the maintainability of stylesheets built using this technique. This is because a change to an <code>extends</code> property would have to be propagated manually to the inheriting selectors.</li>&#x000A;<li>Unfortunately, the LessCSS approach introduces a new syntax for CSS parsers to understand but the use of a selector paves the way for allowing inheriting other types of selectors. I&#8217;m not sure that is a desirable thing yet because I&#8217;ve not fully thought through the ramifications, but I like that it keeps the option open.</li>&#x000A;</ul><h2>The <code>@extends</code> Directive</h2>&#x000A;&#x000A;<p>I propose a hybrid syntax that I will use for the remainder of this post: The <code>@extends</code> directive:</p>&#x000A;&#x000A;<div class="code-wrapper">&#x000A;<table id="simple-class-inheritance" class="comparison side-by-side">&#x000A;<tr>&#x000A;<th class="window-title">CSS</th>&#x000A;<th class="gap"> </th>&#x000A;<th class="window-title">Display</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="CodeRay scss">&#x000A;  <div class="code"><pre><span class="cl">.box</span> {&#x000A;  <span class="ke">border</span>: <span class="fl">2px</span> <span class="vl">solid</span> <span class="vl">black</span>;&#x000A;  <span class="ke">margin</span>: <span class="fl">1em</span>;&#x000A;}&#x000A;&#x000A;<span class="cl">.important-box</span> {&#x000A;  <span class="di">@extends</span> .<span class="ke">box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#CCC</span>;&#x000A;}&#x000A;&#x000A;<span class="cl">.error-box</span> {&#x000A;  <span class="di">@extends</span> .<span class="ke">important-box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#FCC</span>;&#x000A;  <span class="ke">color</span>: <span class="vl">red</span>;&#x000A;  <span class="ke">border-color</span>: <span class="vl">red</span>;&#x000A;}</pre></div>&#x000A;</div></pre>&#x000A;</div>&#x000A;</td>&#x000A;<td rowspan="4" class="gap"> </td>&#x000A;<td rowspan="4" valign="top" class="window browser">&#x000A;<div id="simple-display">&#x000A;<div class="box">&#x000A;  This is a normal box.&#x000A;</div>&#x000A;<div class="important-box">&#x000A;  This is an important box.&#x000A;</div>&#x000A;<div class="error-box">&#x000A;  This is an error box.&#x000A;</div>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;<tr><td> </td></tr>&#x000A;<tr>&#x000A;<th class="window-title">HTML</th>&#x000A;</tr>&#x000A;<tr><td valign="top" class="window editor">&#x000A;<pre><div class="highlight html"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span><span class="nt">&gt;</span>&#x000A;  This is a normal box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"important-box"</span><span class="nt">&gt;</span>&#x000A;  This is an important box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"error-box"</span><span class="nt">&gt;</span>&#x000A;  This is an error box.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;</pre></div></pre>&#x000A;</td></tr>&#x000A;</table>&#x000A;</div>&#x000A;&#x000A;&#x000A;<h2>CSS Inheritance and Document Structure</h2>&#x000A;&#x000A;<p>Let&#8217;s consider a more complex example where the css class in question has interactions with the document structure. CSS inheritance should work in a way that is logical, consistent, and expected within the context of a document.</p>&#x000A;&#x000A;<p>Consider the following document fragment:</p>&#x000A;&#x000A;<div class="code-wrapper">&#x000A;<table id="positional-document" class="comparison side-by-side">&#x000A;<tr>&#x000A;<th class="window-title">HTML</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="highlight html"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"grid"</span><span class="nt">&gt;</span>&#x000A;  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"top"</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>&#x000A;    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span><span class="nt">&gt;</span> This is a top box <span class="nt">&lt;/div&gt;</span>&#x000A;    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"error-box"</span><span class="nt">&gt;</span> This is also a top box <span class="nt">&lt;/div&gt;</span>&#x000A;  <span class="nt">&lt;/div&gt;</span>&#x000A;  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"middle"</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>&#x000A;    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"important-box"</span><span class="nt">&gt;</span> This is a middle box <span class="nt">&lt;/div&gt;</span>&#x000A;    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span><span class="nt">&gt;</span> This is also a middle box <span class="nt">&lt;/div&gt;</span>&#x000A;  <span class="nt">&lt;/div&gt;</span>&#x000A;  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"bottom"</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>&#x000A;    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span><span class="nt">&gt;</span> This is a bottom box <span class="nt">&lt;/div&gt;</span>&#x000A;    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"important-box"</span><span class="nt">&gt;</span> This is also a bottom box <span class="nt">&lt;/div&gt;</span>&#x000A;  <span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;</pre></div></pre>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;</table>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>We should now be able style this quite simply:</p>&#x000A;&#x000A;<div id="positional-styling" class="code-wrapper">&#x000A;<table id="three-column-layouts" class="comparison side-by-side">&#x000A;<tr>&#x000A;<th class="window-title">CSS</th>&#x000A;<th class="gap"> </th>&#x000A;<th class="window-title">Browser</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="CodeRay scss">&#x000A;  <div class="code"><pre><span class="c">/*</span> <span class="c">Box</span> <span class="c">Styling</span> <span class="c">*/</span>&#x000A;<span class="cl">.box</span> {&#x000A;  <span class="ke">border</span>: <span class="fl">2px</span> <span class="vl">solid</span> <span class="vl">black</span>; <span class="ke">margin</span>: <span class="fl">1em</span>;&#x000A;}&#x000A;<span class="cl">.important-box</span> {&#x000A;  <span class="di">@extends</span> .<span class="ke">box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#CCC</span>;&#x000A;}&#x000A;<span class="cl">.error-box</span> {&#x000A;  <span class="di">@extends</span> .<span class="ke">important-box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#FCC</span>; <span class="ke">color</span>: <span class="vl">red</span>; <span class="ke">border-color</span>: <span class="vl">red</span>;&#x000A;}&#x000A;&#x000A;<span class="c">/*</span> <span class="c">Style</span> <span class="c">a</span> <span class="c">Grid</span> <span class="c">Layout</span> <span class="c">*/</span>&#x000A;<span class="c">/*</span> <span class="c">Note:</span> <span class="c">it</span> <span class="c">doesn't</span> <span class="c">matter</span> <span class="c">what</span> <span class="c">kind</span> <span class="c">of</span> <span class="c">box</span> <span class="c">we</span> <span class="c">have,</span>&#x000A;         <span class="c">the</span> <span class="c">.box</span> <span class="c">selector</span> <span class="c">matches</span> <span class="c">all</span> <span class="c">of</span> <span class="c">them</span> <span class="c">because</span>&#x000A;         <span class="c">they</span> <span class="c">all</span> <span class="c">extend</span> <span class="c">from</span> <span class="c">the</span> <span class="c">box</span> <span class="c">class.</span> <span class="c">*/</span>&#x000A;<span class="cl">.grid</span> {&#x000A;  <span class="ke">display</span>: <span class="vl">table</span>; <span class="ke">margin</span>: <span class="fl">1em</span>; <span class="ke">border-spacing</span>: <span class="fl">5px</span>;&#x000A;}&#x000A;<span class="cl">.row</span>  {&#x000A;  <span class="ke">display</span>: <span class="vl">table-row</span>;&#x000A;}&#x000A;<span class="cl">.box</span> {&#x000A;  <span class="ke">display</span>: <span class="vl">table-cell</span>;&#x000A;}&#x000A;&#x000A;<span class="c">/*</span> <span class="c">We</span> <span class="c">can</span> <span class="c">also</span> <span class="c">style</span> <span class="c">with</span> <span class="c">descendant</span> <span class="c">selectors:</span> <span class="c">*/</span>&#x000A;<span class="co">#top</span> <span class="cl">.box</span>    { <span class="ke">font-size</span>: <span class="vl">larger</span>; }&#x000A;<span class="co">#bottom</span> <span class="cl">.box</span> { <span class="ke">font-size</span>: <span class="vl">smaller</span>; }</pre></div>&#x000A;</div></pre>&#x000A;</div>&#x000A;</td>&#x000A;<td class="gap"> </td>&#x000A;<td valign="top" class="window browser">&#x000A;<div>&#x000A;<div class="grid">&#x000A;<div id="top" class="row">&#x000A;<div class="box">&#x000A;      This is a top box&#x000A;</div>&#x000A;<div class="error-box">&#x000A;      This is also a top box&#x000A;</div>&#x000A;</div>&#x000A;<div id="middle" class="row">&#x000A;<div class="important-box">&#x000A;      This is a middle box&#x000A;</div>&#x000A;<div class="box">&#x000A;      This is also a middle box&#x000A;</div>&#x000A;</div>&#x000A;<div id="bottom" class="row">&#x000A;<div class="box">&#x000A;      This is a bottom box&#x000A;</div>&#x000A;<div class="important-box">&#x000A;      This is also a bottom box&#x000A;</div>&#x000A;</div>&#x000A;</div>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;</table>&#x000A;</div>&#x000A;&#x000A;&#x000A;<h2>Why Is it Useful?</h2>&#x000A;&#x000A;<p>At this point you are probably thinking to yourself &#8220;Why not just put multiple classes on the html elements?&#8221; That&#8217;s a good question and there are a couple of reasons this is not preferable:</p>&#x000A;&#x000A;<ol>&#x000A;<li><p>First and foremost, the answer is that this is more maintainable. The box <a href="/blog/2009/09/20/why-stylesheet-abstraction-matters/">abstraction</a> should not be leaky and in practice it might be extending many classes that are purely presentational building blocks dealing with cross-browser concerns, clear-fixing, etc. that you needn&#8217;t concern yourself with every time you want to use that abstraction. This concept is called &#8220;encapsulation&#8221; and is fundamental to object oriented programming and to keeping code maintainable.</p></li>&#x000A;<li><p>Multiple classes have the same specificity on an element, which means that the document order of the CSS will determine the resolution of the same property&#8217;s value. However, when you extend something, you are overriding the values of it, even if the document order says otherwise. That said, the chances that you&#8217;ll bump into this limitation of exactly the same specificity is quite rare. The more likely scenario is that you&#8217;ll have a more specific selector that is overriding both. If you do run into this issue, it&#8217;s usually fairly simple to work around by reorganizing your stylesheets.</p></li>&#x000A;</ol><h2>Dealing with Multiple Inheritance</h2>&#x000A;&#x000A;<p>As noted by Nicole, one way to handle multiple inheritance is for the browser to maintain an ordered list of the classes that have been inherited. That list would be ordered first by the increasing selector weight of the applying selector and then by the inheritance order and lastly by document order. This order would then be used to determine property conflict resolution for selectors having the same specificity. This approach would incur a rendering performance penalty because the global resolution order cannot be precomputed.</p>&#x000A;&#x000A;<h2>Simulating Inheritance</h2>&#x000A;&#x000A;<p>CSS class inheritance can be approximated by a stylesheet compiler, but it cannot be truly implemented without knowledge of the DOM. In the examples above, our knowledge of the class inheritance tree allows us to rewrite selectors to reference the extended classes to match all the known subclasses. For example:</p>&#x000A;&#x000A;<div class="code-wrapper">&#x000A;<table id="three-column-layouts" class="comparison side-by-side">&#x000A;<tr>&#x000A;<th class="window-title">Extended CSS</th>&#x000A;<th class="gap"> </th>&#x000A;<th class="window-title">Compiled CSS</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="CodeRay scss">&#x000A;  <div class="code"><pre><span class="cl">.box</span> {&#x000A;  <span class="ke">border</span>: <span class="fl">2px</span> <span class="vl">solid</span> <span class="vl">black</span>;&#x000A;  <span class="ke">margin</span>: <span class="fl">1em</span>;&#x000A;}&#x000A;<span class="cl">.important-box</span> {&#x000A;  <span class="di">@extends</span> .<span class="ke">box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#CCC</span>;&#x000A;}&#x000A;<span class="cl">.error-box</span> {&#x000A;  <span class="di">@extends</span> .<span class="ke">important-box</span>;&#x000A;  <span class="ke">background-color</span>: <span class="cr">#FCC</span>;&#x000A;  <span class="ke">color</span>: <span class="vl">red</span>;&#x000A;  <span class="ke">border-color</span>: <span class="vl">red</span>;&#x000A;}&#x000A;<span class="cl">.grid</span> {&#x000A;  <span class="ke">display</span>: <span class="vl">table</span>;&#x000A;  <span class="ke">margin</span>: <span class="fl">1em</span>;&#x000A;  <span class="ke">border-spacing</span>: <span class="fl">5px</span>;&#x000A;}&#x000A;<span class="cl">.row</span> {&#x000A;  <span class="ke">display</span>: <span class="vl">table-row</span>;&#x000A;}&#x000A;<span class="cl">.box</span> {&#x000A;  <span class="ke">display</span>: <span class="vl">table-cell</span>;&#x000A;}&#x000A;<span class="co">#top</span> <span class="cl">.box</span> {&#x000A;  <span class="ke">font-size</span>: <span class="vl">larger</span>;&#x000A;}&#x000A;<span class="co">#bottom</span> <span class="cl">.box</span> {&#x000A;  <span class="ke">font-size</span>: <span class="vl">smaller</span>;&#x000A;}</pre></div>&#x000A;</div></pre>&#x000A;</div>&#x000A;</td>&#x000A;<td class="gap"> </td>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="CodeRay css">&#x000A;  <div class="code"><pre><span class="cl">.box</span>, <span class="cl">.important-box</span>, <span class="cl">.error-box</span> {&#x000A;  <span class="ke">border</span>: <span class="fl">2px</span> <span class="vl">solid</span> <span class="vl">black</span>;&#x000A;  <span class="ke">margin</span>: <span class="fl">1em</span>;&#x000A;}&#x000A;<span class="cl">.important-box</span>, <span class="cl">.error-box</span> {&#x000A;  <span class="ke">background-color</span>: <span class="cr">#CCC</span>;&#x000A;}&#x000A;<span class="cl">.error-box</span> {&#x000A;  <span class="ke">background-color</span>: <span class="cr">#FCC</span>;&#x000A;  <span class="ke">color</span>: <span class="vl">red</span>;&#x000A;  <span class="ke">border-color</span>: <span class="vl">red</span>;&#x000A;}&#x000A;<span class="cl">.grid</span> {&#x000A;  <span class="ke">display</span>: <span class="vl">table</span>;&#x000A;  <span class="ke">margin</span>: <span class="fl">1em</span>;&#x000A;  <span class="ke">border-spacing</span>: <span class="fl">5px</span>;&#x000A;}&#x000A;<span class="cl">.row</span> {&#x000A;  <span class="ke">display</span>: <span class="vl">table-row</span>;&#x000A;}&#x000A;<span class="cl">.box</span>, <span class="cl">.important-box</span>, <span class="cl">.error-box</span> {&#x000A;  <span class="ke">display</span>: <span class="vl">table-cell</span>;&#x000A;}&#x000A;<span class="co">#top</span> <span class="cl">.box</span>,&#x000A;<span class="co">#top</span> <span class="cl">.important-box</span>,&#x000A;<span class="co">#top</span> <span class="cl">.error-box</span> {&#x000A;  <span class="ke">font-size</span>: <span class="vl">larger</span>;&#x000A;}&#x000A;<span class="co">#bottom</span> <span class="cl">.box</span>,&#x000A;<span class="co">#bottom</span> <span class="cl">.important-box</span>,&#x000A;<span class="co">#bottom</span> <span class="cl">.error-box</span> {&#x000A;  <span class="ke">font-size</span>: <span class="vl">smaller</span>;&#x000A;}</pre></div>&#x000A;</div></pre>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;</table>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>However, it&#8217;s possible to construct an example where the expected behavior of true inheritance cannot be simulated. I present one such example here:</p>&#x000A;&#x000A;<div class="code-wrapper">&#x000A;<table id="simple-class-inheritance" class="comparison side-by-side">&#x000A;<tr>&#x000A;<th class="window-title">CSS</th>&#x000A;<th class="gap"> </th>&#x000A;<th class="window-title">Expected Display</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="CodeRay scss">&#x000A;  <div class="code"><pre><span class="co">#top</span> <span class="cl">.base</span> {&#x000A;  <span class="ke">background-color</span>: <span class="cr">#c77</span>;&#x000A;}&#x000A;<span class="co">#bottom</span> <span class="cl">.base</span> {&#x000A;  <span class="ke">background-color</span>: <span class="cr">#7c7</span>;&#x000A;}&#x000A;<span class="cl">.primary</span> <span class="cl">.extended</span>,&#x000A;<span class="cl">.alternate</span> <span class="cl">.extended</span> {&#x000A;  <span class="di">@extends</span> .<span class="ke">base</span>;&#x000A;}</pre></div>&#x000A;</div></pre>&#x000A;</div>&#x000A;</td>&#x000A;<td class="gap"> </td>&#x000A;<td valign="top" class="window browser">&#x000A;<div id="compilation-expected-display">&#x000A;<div id="top" class="primary">&#x000A;<div class="base">&#x000A;      This should have a red background.&#x000A;</div>&#x000A;<div class="extended">&#x000A;      This should also have a red background.&#x000A;</div>&#x000A;</div>&#x000A;<div id="bottom" class="alternate">&#x000A;<div class="base">&#x000A;      This should have a green background.&#x000A;</div>&#x000A;<div class="extended">&#x000A;      This should also have a green background.&#x000A;</div>&#x000A;</div>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td> </td>&#x000A;<td class="gap"> </td>&#x000A;</tr>&#x000A;<tr>&#x000A;<th class="window-title">HTML</th>&#x000A;<th class="gap"> &#x000A;</th>&#x000A;<th class="window-title">Actual Display</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<pre><div class="highlight html"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"top"</span> <span class="na">class=</span><span class="s">"primary"</span><span class="nt">&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"base"</span><span class="nt">&gt;</span>&#x000A;    This should have a red background.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"extended"</span><span class="nt">&gt;</span>&#x000A;    This should also have a red background.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"bottom"</span> <span class="na">class=</span><span class="s">"alternate"</span><span class="nt">&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"base"</span><span class="nt">&gt;</span>&#x000A;    This should have a green background.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"extended"</span><span class="nt">&gt;</span>&#x000A;    This should also have a green background.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;</pre></div></pre>&#x000A;</td>&#x000A;<td class="gap"> </td>&#x000A;<td valign="top" class="window browser">&#x000A;<div id="compilation-actual-display">&#x000A;<div id="top" class="primary">&#x000A;<div class="base">&#x000A;      This should have a red background.&#x000A;</div>&#x000A;<div class="extended">&#x000A;      This should also have a red background.&#x000A;</div>&#x000A;</div>&#x000A;<div id="bottom" class="alternate">&#x000A;<div class="base">&#x000A;      This should have a green background.&#x000A;</div>&#x000A;<div class="extended">&#x000A;      This should also have a green background.&#x000A;</div>&#x000A;</div>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;</table>&#x000A;</div>&#x000A;&#x000A;&#x000A;<p>It should be noted at the time of this posting, that LessCSS compiler does not perform any form of selector re-writing of extended classes, instead it only augments the definitions of the classes. I assume this is a bug that no one has noticed yet and that it will be fixed eventually. However, the more fundamental flaw cannot be fixed, but I&#8217;m eager to hear from real-world users of LessCSS whether it has affected them in a meaningful way.</p>&#x000A;&#x000A;<p>Neither can a compiler correctly handle resolution of multiple inheritance given the algorithm above. Since a compiler works based solely on selector rewriting, document order is the only resolution mechanism. As such, the authors should take care to avoid inheriting from classes defined later in the document. My gut tells me that a counter-example exists where-in an author cannot reorder the stylesheet rules and achieve the desired result, but I&#8217;ve not been able to construct one. I leave this as an open challenge to prove whether or not such a counter-example exists.</p>&#x000A;&#x000A;<p>As much as I like the idea of class inheritance, because of these confusing edge cases, I&#8217;m wary about introducing such a syntax into Sass. I feel that mixins are a much more predictable, and document agnostic, approach to abstraction. That said, an automatic selector rewriting capability is a very compelling feature in the most common real-world, use cases. I&#8217;m interested to hear your feedback.</p>&#x000A;&#x000A;<h2>UPDATE: <code>@extend</code> is in Sass 3</h2>&#x000A;&#x000A;<p>Thanks to the fact that <a href="http://nex-3.com/">Nathan</a> was able find a compiler-based solution to many of the things I had thought just wouldn&#8217;t be possible, we have implemented <code>@extend</code> and <a href="http://nex-3.com/posts/99-selector-inheritance-the-easy-way-introducing-extend">it is part of the Sass 3 release</a>. For example, here&#8217;s the same code example using Sass 3 to compile it:</p>&#x000A;&#x000A;<div class="code-wrapper">&#x000A;<table id="simple-class-inheritance" class="comparison side-by-side">&#x000A;<tr>&#x000A;<th class="window-title">CSS</th>&#x000A;<th class="gap"> </th>&#x000A;<th class="window-title">Expected Display</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;<div>&#x000A;<pre><div class="CodeRay scss">&#x000A;  <div class="code"><pre><span class="co">#top</span> <span class="cl">.base</span> {&#x000A;  <span class="ke">background-color</span>: <span class="cr">#c77</span>;&#x000A;}&#x000A;<span class="co">#bottom</span> <span class="cl">.base</span> {&#x000A;  <span class="ke">background-color</span>: <span class="cr">#7c7</span>;&#x000A;}&#x000A;<span class="cl">.primary</span> <span class="cl">.extended</span>,&#x000A;<span class="cl">.alternate</span> <span class="cl">.extended</span> {&#x000A;  <span class="di">@extends</span> .<span class="ke">base</span>;&#x000A;}</pre></div>&#x000A;</div></pre>&#x000A;</div>&#x000A;</td>&#x000A;<td class="gap"> </td>&#x000A;<td valign="top" class="window browser">&#x000A;<div id="compilation-expected-display">&#x000A;<div id="top" class="primary">&#x000A;<div class="base">&#x000A;      This should have a red background.&#x000A;</div>&#x000A;<div class="extended">&#x000A;      This should also have a red background.&#x000A;</div>&#x000A;</div>&#x000A;<div id="bottom" class="alternate">&#x000A;<div class="base">&#x000A;      This should have a green background.&#x000A;</div>&#x000A;<div class="extended">&#x000A;      This should also have a green background.&#x000A;</div>&#x000A;</div>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;<tr>&#x000A;<td> </td>&#x000A;<td class="gap"> </td>&#x000A;</tr>&#x000A;<tr>&#x000A;<th class="window-title">HTML</th>&#x000A;<th class="gap"> &#x000A;</th>&#x000A;<th class="window-title">Actual Display</th>&#x000A;</tr>&#x000A;<tr>&#x000A;<td valign="top" class="window editor">&#x000A;&#x000A;<pre><div class="highlight html"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"top"</span> <span class="na">class=</span><span class="s">"primary"</span><span class="nt">&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"base"</span><span class="nt">&gt;</span>&#x000A;    This should have a red background.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"extended"</span><span class="nt">&gt;</span>&#x000A;    This should also have a red background.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"bottom"</span> <span class="na">class=</span><span class="s">"alternate"</span><span class="nt">&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"base"</span><span class="nt">&gt;</span>&#x000A;    This should have a green background.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"extended"</span><span class="nt">&gt;</span>&#x000A;    This should also have a green background.&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;/div&gt;</span>&#x000A;</pre></div></pre>&#x000A;&#x000A;</td>&#x000A;<td class="gap"> </td>&#x000A;<td valign="top" class="window browser">&#x000A;<div id="compilation-win-display">&#x000A;<div id="top" class="primary">&#x000A;<div class="base">&#x000A;      This should have a red background.&#x000A;</div>&#x000A;<div class="extended">&#x000A;      This should also have a red background.&#x000A;</div>&#x000A;</div>&#x000A;<div id="bottom" class="alternate">&#x000A;<div class="base">&#x000A;      This should have a green background.&#x000A;</div>&#x000A;<div class="extended">&#x000A;      This should also have a green background.&#x000A;</div>&#x000A;</div>&#x000A;</div>&#x000A;</td>&#x000A;</tr>&#x000A;</table>&#x000A;</div>&#x000A;&#x000A;&#x000A;<h2>Mixins are not Class Inheritance</h2>&#x000A;&#x000A;<p>Mixins add implementation to a selector, but as we&#8217;ve seen, class inheritance adds implementation by changing the meaning of selectors by allowing the selectors to match against a base class. As such, a mixin is a useful tool that you could use to build your own class &#8220;hierarchies&#8221; manually and when coupled with Sass&#8217;s ability to nest selectors and permute them easily, it&#8217;s much easier to maintain your class definitions and related selectors than it would be in pure CSS. Of course, mixins can take arguments, and that makes them very useful in their own right. If CSS magically changed tomorrow to allow CSS Class inheritance, I would still need the mixin as a <a href="/blog/2009/09/20/why-stylesheet-abstraction-matters/">fundamental abstraction for creating stylesheets</a>.</p>&#x000A;&#x000A;<h2>What does the future hold?</h2>&#x000A;&#x000A;<p>Let me get out my crystal ball. Ok. Sadly, I don&#8217;t think we&#8217;ll ever have browser support for CSS class inheritance. No one is discussing adding such a feature to CSS3, and so CSS4 would be the earliest. Even if it was made part of an official specification, you&#8217;d not be able to use it for years because there&#8217;s no way to gracefully degrade. So maybe, if somehow we can convince the W3C to add support, you might be able to use this feature in 5 to 10 years from now &#8211; that&#8217;s roughly equivalent to forever in internet time.</p>&#x000A;&#x000A;<p>In the meantime, I predict that CSS compilers will soon let you simulate inheritance where the descendent relationship can be inferred from the existing set of selectors. (Crazy, it was even sooner than I thought: <a href="http://xcss.antpaw.org/">xCSS</a> was just released that implements extends using an augmented selector syntax.)</p>&#x000A;&#x000A;<p>However, simply learning to <em>think</em> about CSS classes as extending other CSS classes is going to help you construct and manage your stylesheets and to keep a clean <a href="/blog/2009/09/25/separating-style-concerns/">separation of concerns</a>. Hopefully this post will also help you evaluate and understand the tools and frameworks that you have at your disposal, to understand their limitations, as well as their strengths.</p></div>
            <div class="footer">
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                //<![CDATA[
                  var disqus_url = "http://chriseppstein.github.com/blog/2009/10/12/css-class-inheritance";
                  var disqus_developer = 1;
                //]]>
              </script>
              <noscript>
                <a href="http://chriseppstein.disqus.com/?url=ref">View the discussion thread.</a>
              </noscript>
              <script src="http://disqus.com/forums/chriseppstein/embed.js" type="text/javascript"></script>
            </div>
          </div>
        </div>
        <div class="aside" id="sidebar">
          <div class="section" id="about-me">
            <h3>About Me</h3>
            <img class="avatar" src="http://www.gravatar.com/avatar/b0ceed615487ddf041bb0d1cf24a98b0.png" />
            <p>I'm the Software Architect at <a href="http://www.caring.com/">Caring.com</a>,
            a website devoted to caregivers of the sick and elderly.
            I live in San Jose, California with my wife and our 4 year old daughter.</p>
          </div>
          <div class="section">
            <h3>Open Source</h3>
            <p>I'm the creator of <a href="http://compass-style.org/">Compass</a>, a stylesheet authoring framework
            and I'm on the core team of
            <a href="http://sass-lang.com/">Sass</a> &mdash; the stylesheet syntax upon which Compass is built.
            I maintain about a dozen less well known ruby libraries and rails plugins on
            <a href="http://github.com/chriseppstein">github</a>,
            and am an active contributor of patches to the many open source projects that I use.</p>
          </div>
          <div class="section" id="twitter">
            <div class="header">
              <h3 style="display: inline-block">Twitter</h3>
              <span>
                <a href="http://twitter.com/chriseppstein">@chriseppstein</a>
              </span>
            </div>
            <div class="tweet"></div>
            <p class="follow">
              <img src="/images/twitter_bird.png" />
            </p>
          </div>
          <div class="section omega">
            <ol id="social">
              <li>
                <a class="twitter" href="http://twitter.com/chriseppstein" title="Follow me on Twitter">
                  Twitter
                </a>
              </li>
              <li>
                <a class="github" href="http://github.com/chriseppstein" title="My Github profile">
                  Github
                </a>
              </li>
              <li>
                <a class="facebook" href="http://facebook.com/chriseppstein" title="My Facebook profile">
                  Facebook
                </a>
              </li>
              <li>
                <a class="linkedin" href="http://www.linkedin.com/in/chriseppstein" title="My Linked-in profile">
                  Linked-in
                </a>
              </li>
              <li>
                <a class="delicious" href="http://delicious.com/chriseppstein/" title="My Delicious links">
                  Delicious
                </a>
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
    <div id="footer-wrapper">
      <div id="footer">
        <div class="bottom_nav">
          <div class="back-to-top">
            <a class="ucase" href="#">&uarr; back to top</a>
          </div>
        </div>
        <div class="alone" id="foot_bottom">
          <a class="affiliate compass" href="http://compass-style.org" title="Styled with Compass">
            Styled with Compass
          </a>
          <h6>
            Powered by
            <a href="http://nanoc.stoneship.org/">Nanoc</a>
            and
            <a href="http://www.oddbird.net/susy/">Susy</a>
          </h6>
          <h6 class="copyright">
            &ndash; design <span class="amp">&amp;</span> content &copy; 2009 &ndash; christopher eppstein
          </h6>
          <h6>
            &ndash; with design help and inspiration from
            <a href="http://brandonmathis.com/">Brandon Mathis</a>
          </h6>
          <h6>
            &ndash;
            browse
            <a href="/highlighted/stylesheets/screen.sass.html">stylesheets</a>
            or
            <a href="http://github.com/chriseppstein/chriseppstein.github.com/tree/source">site source code</a>
          </h6>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      //<![CDATA[
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      //]]>
    </script>
    <script type="text/javascript">
      //<![CDATA[
        try {
          var pageTracker = _gat._getTracker("UA-10648948-1");
          pageTracker._trackPageview();
        } catch(err) {}
      //]]>
    </script>
  </body>
</html>
